#!/bin/bash
USAGE="$(basename "$0") [-h --help] [-g --git] [-c --ctags ] [-m --cmus ] [-p --phpctags] [-v --vim] [-t --tmux] [-z --zsh] -- Installs VIM plugins & configures ZSH just the way you like it

OPTIONS
        -h, --help
            Print this message

        -g, --git
            Perform basic git setup

        -c, --ctags
            Install patched ctags

        -p, --phpctags
            Install PHPCTags

        -v, --vim
            Install VIM plugins & syntax

        -t, --tmux
            Install tmux addons

        -m, --cmus
            Install cmus addons

        -z, --zsh
            Install ZSH plugins\n"
if [[ -z $1 ]]; then
    printf "$USAGE"
    exit 0
fi
DIR="$( cd -P "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
CP="/bin/cp -vfr"

INSTALL_GIT=false
INSTALL_PHPCTAGS=false
INSTALL_CTAGS=false
INSTALL_CMUS=false
INSTALL_VIM=false
INSTALL_TMUX=false
INSTALL_ZSH_PLUGINS=false

if ! OPTIONS=$(getopt -o hgcmpvtza -l help,git,ctags,cmus,phpctags,vim,tmux,zsh,all -- "$@")
then
    # something went wrong, getopt will put out an error message for us
    exit 1
fi
while [ $# -gt 0 ]; do
    case $1 in
        "-h" | "--help") printf "$USAGE"; exit 0 ;;
        "-g" | "--git") INSTALL_GIT=true ;;
        "-c" | "--ctags") INSTALL_CTAGS=true ;;
        "-m" | "--cmus") INSTALL_CMUS=true ;;
        "-p" | "--phpctags") INSTALL_PHPCTAGS=true ;;
        "-v" | "--vim") INSTALL_VIM=true ;;
        "-t" | "--tmux") INSTALL_TMUX=true ;;
        "-z" | "--zsh") INSTALL_ZSH_PLUGINS=true ;;
        "-a" | "--all")
            INSTALL_GIT=true
            INSTALL_CTAGS=true
            INSTALL_CMUS=true
            INSTALL_PHPCTAGS=true
            INSTALL_VIM=true
            INSTALL_TMUX=true
            INSTALL_ZSH_PLUGINS=true
            break;;
        (--) shift; break;;
        (-*) echo "$0: error - unrecognized option $1" 1>&2; exit 1;;
        (*) break;;
    esac
    shift
done

if $INSTALL_TMUX; then
    "$DIR/installers/tmux.sh"
fi

if $INSTALL_GIT; then
    "$DIR/installers/git-configuration.sh"
fi

if $INSTALL_CTAGS; then
    "$DIR/installers/ctags.sh"
fi

if $INSTALL_CMUS; then
    "$DIR/installers/cmus.sh"
fi

if $INSTALL_PHPCTAGS; then
    "$DIR/installers/phpctags.sh"
fi

if $INSTALL_VIM; then
    "$DIR/installers/vim.sh"
fi

if $INSTALL_ZSH_PLUGINS; then
    "$DIR/installers/zsh.sh"
fi

